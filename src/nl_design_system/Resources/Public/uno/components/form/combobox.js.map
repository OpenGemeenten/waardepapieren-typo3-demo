{"version":3,"file":"combobox.js","sourceRoot":"","sources":["../../../../../../../src/components/form/combobox.ts"],"names":["Combobox","Combobox.constructor","Combobox.allowUnknown","Combobox.data","Combobox.filterFunction","Combobox.inputTimeout","Combobox.labelField","Combobox.labelFunction","Combobox.loading","Combobox.mode","Combobox.validationError","Combobox.value","Combobox.isOpen","Combobox.query","Combobox.handleEvent","Combobox.open","Combobox.close","Combobox.destroy","Combobox.createListItems","Combobox.createNoResultItem","Combobox.defaultFilter","Combobox.defaultLabel","Combobox.filterInput","Combobox.showNoResultItem","Combobox.hideNoResultItem","Combobox.focusNextItem","Combobox.initialize","Combobox.onInputinput","Combobox.onInputkeydown","Combobox.onInputkeyup","Combobox.onListclick","Combobox.onBodyclick","Combobox.findDataField","Combobox.onListkeydown","Combobox.onListkeyup","Combobox.onToggleclick","Combobox.updateFilterList","Combobox.onFilterLabelClick","Combobox.getFilterContainer","Combobox.buildFilterList","Combobox.setValue","Combobox.setup","Combobox.setupListeners","Combobox.removeListItems"],"mappings":"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AACA,YAAYA,CAACA,KAAKA,EAAEA,QAAQA,CAACA,CAACA,CAACA,CAACA;wBACtCA,KAAIA,CAACA,KAAKA,EAAEA,CAACA;oBACjBA,CAACA;oBAEDA,EAAEA,CAACA,CAACA,aAAKA,CAACA,YAAYA,CAACA,KAAKA,EAAEA,KAAKA,CAACA,CAACA,CAACA,CAACA;wBACnCA,IAAIA,QAAQA,GAAaA,KAAIA,CAACA,KAAKA,CAACA,gBAAgBA,CAACA,OAAOA,CAACA,CAACA;wBAE9DA,EAAEA,CAACA,CAACA,CAACA,KAAKA,CAACA,QAAQA,CAACA,CAACA,CAACA;4BAClBA,EAAEA,CAACA,CAACA,KAAKA,IAAIA,QAAQA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,CAACA;gCAC/BA,KAAIA,CAACA,KAAKA,EAAEA,CAACA;4BACjBA,CAACA;wBACLA,CAACA;wBAACA,IAAIA,CAACA,EAAEA,CAACA,CAACA,KAAKA,KAAKA,CAACA,CAACA,CAACA,CAACA;4BACrBA,KAAIA,CAACA,KAAKA,EAAEA,CAACA;wBACjBA,CAACA;oBAELA,CAACA;gBAELA,CAACA,CAACA,CAACA;gBAEHA,KAAIA,CAACA,KAAKA,CAACA,WAAWA,CAACA,EAAEA,CAACA,CAACA;YAC/BA,CAACA,CAACA,CAACA;YACHA,MAAMA,CAACA;QACXA,CAACA;QAEDA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA;YACbA,MAAMA,CAACA;QACXA,CAACA;QACDA,IAAIA,CAACA,IAAIA,CAACA,OAAOA,CAACA,UAACA,IAASA;YACxBA,IAAIA,KAAKA,GAAWA,KAAIA,CAACA,aAAaA,CAACA,IAAIA,CAACA,CAACA;YAE7CA,IAAIA,EAAEA,GAAYA,aAAKA,CAACA,UAAUA,CAACA,aAAaA,CAACA,KAAKA,CAACA,IAAIA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;YAC1EA,EAAEA,CAACA,SAASA,CAACA,GAAGA,IAAIA,CAACA;YACrBA,KAAIA,CAACA,KAAKA,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","sourcesContent":["import { Utils } from '../../core/utils';\n\nconst ITEM_TEMPLATE: string = `<li role=\"button\" tabindex=\"-1\" class=\"combobox__item\">\n    <span class=\"combobox__link\">%s</span>\n </li>`;\n\nconst NO_RESULT_TEMPLATE: string = `<li tabindex=\"-1\" class=\"combobox__item combobox__item--no-results\" hidden>\n <span class=\"combobox__link\">Geen resultaten gevonden.</span>\n</li>`;\n\nconst ITEM_COMBOBOX_TEMPLATE: string = `<li class=\"input__group input__group--compact input__group--checkbox\" role=\"group\">\n<input role=checkbox type=\"checkbox\" id=\"chkbx-compact-$id\" class=\"input__control input__control--checkbox\">\n<label class=\"input__label input__label--checkbox combobox__link\" for=\"chkbx-compact-$id\">$label</label>\n</li>`;\n\nconst DATAFIELD: string = 'comboboxItem';\n\nexport const MODE_FILTER: number = 1;\nexport const MODE_AUTOCOMPLETE: number = 2;\n\n/**\n * Combobox / autocomplete component\n * @version 1.0.0\n *\n * <div class=\"input combobox\">\n *  <label class=\"input__label\">Opleiding</label>\n *  <div class=\"input__hint\">Voer een opleidingsnaam of crebonummer in</div>\n *  <input type=\"text\" class=\"combobox__input input__control input__control--text input__control--xl input__control--select\">\n * </div>\n */\nexport class Combobox implements EventListenerObject {\n\n    private _allowUnknown: Boolean = true;\n    private _data: Array<any>;\n    private _filterFunction: any = this.defaultFilter;\n    private _icon: HTMLElement;\n    private _initTimeoutId: number;\n    private _initTimeout: number = 2;\n    private _inputTimeout: number = 100;\n    private _inputTimeoutId: number;\n    private _input: HTMLInputElement;\n    private _list: HTMLElement;\n    private _labelField: string;\n    private _labelFunction: any = this.defaultLabel;\n    private _loading: boolean = false;\n    private _mode: number = MODE_FILTER;\n    private _prevQuery: string;\n    private _toggle: Element;\n    private _validationError: string = 'Ongeldige invoer';\n    private _value: any = null;\n    private _filterContainer: HTMLElement = null;\n    /**\n     * Highlight matched text? Only on default filter\n     * @type {boolean}\n     * @private\n     */\n    private _highlight: boolean = true;\n\n    constructor(private host: Element, private isCheckboxFilter: Boolean = false) {\n\n        if (!host) {\n            throw new Error('No host element specified');\n        }\n\n        this.setup();\n        this.setupListeners();\n    }\n\n    /**\n     * Indicates whether or not an entered value must be present in the\n     * data list.\n     * @default true\n     * @return {Boolean}\n     */\n    get allowUnknown(): Boolean {\n        return this._allowUnknown;\n    }\n\n    set allowUnknown(value: Boolean) {\n        this._allowUnknown = value;\n    }\n\n    get data(): Array<any> {\n        return this._data;\n    }\n\n    /**\n     * Sets the values of the combobox, can be an array of strings or\n     * an array objects. When using objects, be sure to set the `labelField`\n     * property\n     * @param {Array<any>} value\n     */\n    set data(value: Array<any>) {\n        this._data = value;\n        this.initialize();\n    }\n\n    /**\n     * A custom filter function for the data array.\n     * Signature: function(element: any, index: number, array: any[]): boolean\n     * @see https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\n     * @return {Function}\n     */\n    get filterFunction(): any {\n        return this._filterFunction;\n    }\n\n    set filterFunction(value: any) {\n        this._highlight = false;\n        this._filterFunction = value;\n    }\n\n    /**\n     * The number of milliseconds to wait before applying the filtering after the user\n     * has changed the input\n     * @return {string}\n     */\n    get inputTimeout(): number {\n        return this._inputTimeout;\n    }\n\n    set inputTimeout(value: number) {\n        this._inputTimeout = value;\n    }\n    /**\n     * Sets which property of the objects to use to display in the list\n     * @return {string}\n     */\n    get labelField(): string {\n        return this._labelField;\n    }\n\n    set labelField(value: string) {\n        this._labelField = value;\n        this.initialize();\n    }\n\n    /**\n     * Sets which property of the objects to use to display in the list. May contain HTML\n     * Signature: function(value: any): string\n     * @return {function}\n     */\n    get labelFunction(): any {\n        return this._labelFunction;\n    }\n\n    set labelFunction(value: any) {\n        this._labelFunction = value;\n        this.initialize();\n    }\n\n    /**\n     * Indicates the combobox is loading data\n     * @return {boolean}\n     */\n    get loading(): boolean {\n        return this._loading;\n    }\n\n    set loading(isLoading: boolean) {\n        this._loading = isLoading;\n        if (this._icon) {\n            let action: string = isLoading ? 'add' : 'remove';\n            this._icon.classList[action]('combobox__icon--loading');\n        }\n    }\n\n    /**\n     * Set the mode of the combobox\n     * MODE_AUTOCOMPLETE: Always show the full list\n     * MODE_FILTER: Filter the list based on the input value\n     * @return {number}\n     */\n    get mode(): number {\n        return this._mode;\n    }\n\n    set mode(value: number) {\n        this._mode = value;\n    }\n\n    /**\n     * Set the error which is shown when the form is validated and the value\n     * of the combobox is invalid\n     * @return {string}\n     */\n    get validationError(): string {\n        return this._validationError;\n    }\n\n    set validationError(value: string) {\n        this._validationError = value;\n    }\n\n    get value(): any {\n        return this._value;\n    }\n\n    /**\n     * Sets the current selected value of the combobox\n     * @param value\n     */\n    set value(value: any) {\n        if (!this.allowUnknown && this.data.indexOf(value) === -1) {\n            throw new Error(`Unknown item '${value.toString()}'`);\n        }\n        this._value = value;\n        const el: HTMLElement = document.createElement('div');\n        el.innerHTML = this.labelFunction(value);\n        this._input.value = el.textContent;\n    }\n\n    /**\n     * Indicates if the list of the combobox is visible to the user\n     * @readonly\n     * @return {boolean}\n     */\n    get isOpen(): boolean {\n        return this.host.classList.contains('combobox--autocomplete-open');\n    }\n\n    /**\n     * Returns the current value of the input\n     * @return {string}\n     */\n    get query(): string {\n        return this._input ? this._input.value : undefined;\n    }\n\n    /**\n     * @private\n     * @param {Event} event\n     */\n    handleEvent(event: Event): void {\n\n        switch (event.currentTarget) {\n            case this._toggle:\n                this[`onToggle${event.type}`](event);\n                break;\n            case this._list:\n                if (!this.isCheckboxFilter) {\n                    this[`onList${event.type}`](event);\n                }\n                break;\n            case this._input:\n                this[`onInput${event.type}`](event);\n                break;\n            case document.body:\n                this[`onBody${event.type}`](event);\n                break;\n\n            default:\n            /* nothing */\n\n        }\n    }\n\n    /**\n     * Opens the dropdown\n     * @fires 'combobox-open'\n     */\n    open(): void {\n        if (!this.data) {\n            return;\n        }\n\n        const event: any = document.createEvent('CustomEvent');\n        event.initEvent('combobox-open', true, true);\n\n        if (this.host.dispatchEvent(event)) {\n            if (!this.isOpen) {\n                // (Re-)opening the combobox. Reset the query to force filtering\n                this._prevQuery = null;\n            }\n            this.host.classList.add('combobox--autocomplete-open');\n            this._list.hidden = false;\n            this.filterInput();\n        }\n    }\n\n    /**\n     * Closes the dropdown\n     * @fires 'combobox-close'\n     */\n    close(): void {\n\n        if (!this.isOpen) {\n            return;\n        }\n        const event: any = document.createEvent('CustomEvent');\n        event.initEvent('combobox-close', true, true);\n\n        if (this.host.dispatchEvent(event)) {\n            this.host.classList.remove('combobox--autocomplete-open');\n            this._list.hidden = true;\n        }\n    }\n\n    /**\n     * Call when the combobox is removed from the page\n     * Clean up listeners\n     */\n    destroy(): void {\n        this._toggle.removeEventListener('click', this);\n\n        this._input.removeEventListener('keyup', this);\n        this._input.removeEventListener('keydown', this);\n        this._input.removeEventListener('input', this);\n\n        this._list.removeEventListener('click', this);\n        this._list.removeEventListener('keyup', this);\n        this._list.removeEventListener('keydown', this);\n        this._list.remove();\n\n        document.body.removeEventListener('click', this);\n    }\n\n    /**\n     * Create the listitems based on the data array\n     */\n    private createListItems(): void {\n        if (this.isCheckboxFilter) {\n\n            this.data.forEach((item: any, index: number) => {\n                let el: Element = Utils.CreateNode(ITEM_COMBOBOX_TEMPLATE\n                    .replace('$label', item.name)\n                    .replace(/\\$id/g, index.toString()));\n                el[DATAFIELD] = item;\n\n                el.querySelector('input').addEventListener('change', () => {\n                    this.buildFilterList();\n                });\n\n                el.querySelector('input').addEventListener('keydown', (event: KeyboardEvent): void => {\n\n                    if (Utils.IsKeyPressed(event, 'Escape')) {\n                        this.close();\n                    }\n\n                    if (Utils.IsKeyPressed(event, 'Tab')) {\n                        let allItems: NodeList = this._list.querySelectorAll('input');\n\n                        if (!event.shiftKey) {\n                            if (index >= allItems.length - 1) {\n                                this.close();\n                            }\n                        } else if (index === 0) {\n                            this.close();\n                        }\n\n                    }\n\n                });\n\n                this._list.appendChild(el);\n            });\n            return;\n        }\n\n        if (!this.data) {\n            return;\n        }\n        this.data.forEach((item: any) => {\n            let label: string = this.labelFunction(item);\n\n            let el: Element = Utils.CreateNode(ITEM_TEMPLATE.split('%s').join(label));\n            el[DATAFIELD] = item;\n            this._list.appendChild(el);\n        });\n    }\n\n    /**\n     * Adds a no result node to the list.\n     */\n    private createNoResultItem(): void {\n        const el: Element = Utils.CreateNode(NO_RESULT_TEMPLATE);\n        this._list.appendChild(el);\n    }\n\n    /**\n     * This is the default filterFunction.\n     * @param item\n     * @param idx\n     */\n    private defaultFilter(item: any, idx: number): boolean {\n        // Return if matched, this way, we can easily check if there\n        // are any matches\n\n        if (this.isCheckboxFilter) {\n            item = item.name;\n        }\n        return item.toString().toLowerCase().indexOf(this.query.toLowerCase()) > -1;\n    }\n\n    /**\n     * This is the default labelFunction, which will return the item if it's a string,\n     * or the labelField if it's an object\n     * @param item\n     * @param idx\n     */\n    private defaultLabel(item: any, idx: number): string {\n        if (typeof item === 'string') {\n            return item;\n        } else if (this.labelField && item.hasOwnProperty(this.labelField)) {\n            return item[this.labelField].toString();\n        }\n        // Fallback, we don't want to do this, probably returns [Object object]\n        return item.toString();\n    }\n\n    /**\n     * Filters the list based on the value of the input\n     */\n    private filterInput(): void {\n\n        if (!this.data) {\n            return;\n        }\n        window.clearTimeout(this._inputTimeoutId);\n        this._inputTimeoutId = window.setTimeout(\n            () => {\n                if (this._prevQuery !== this.query) {\n                    this._prevQuery = this.query;\n                    let results: Array<string> = this.data.filter((item: any, idx: number, arr: Array<any>) => {\n\n                        let listItem: HTMLElement = this._list.children[idx] as HTMLElement;\n                        let\n                            link: HTMLElement = listItem.querySelector('.combobox__link') as HTMLElement,\n                            match: boolean = this.filterFunction.call(this, item, idx, arr);\n                        // Initially hide all items\n                        listItem.hidden = true;\n                        if (match) {\n                            // Show only matches\n                            listItem.hidden = false;\n\n                            // When using the default filter, we can highlight the results\n                            if (this._highlight && this.query) {\n                                link.innerHTML = link.textContent\n                                    .split(this.query)\n                                    .join(`<span class=\"combobox__match\">${this.query}</span>`);\n                            }\n\n                        } else if (this._highlight) {\n                            // Reset matches for non matching items (remove <spans>)\n                            link.nodeValue = link.textContent;\n                        }\n                        return match;\n                    });\n\n                    results.length ? this.hideNoResultItem() : this.showNoResultItem();\n\n                    if (!this.isOpen) {\n                        this.open();\n                    }\n                }\n            },\n            this.inputTimeout);\n\n    }\n\n    /**\n     * Show the no result item in the dropdown.\n     */\n    private showNoResultItem(): void {\n        const noResultElement: HTMLElement = this._list.querySelector('.combobox__item--no-results') as HTMLElement;\n        noResultElement.hidden = false;\n\n        // remove event listeners because we don't want the no result item to be interactable.\n        this._list.removeEventListener('click', this);\n        this._list.removeEventListener('keyup', this);\n        this._list.removeEventListener('keydown', this);\n    }\n\n    /**\n     * Hide the no result item in the dropdown.\n     */\n    private hideNoResultItem(): void {\n        const noResultElement: HTMLElement = this._list.querySelector('.combobox__item--no-results') as HTMLElement;\n        noResultElement.hidden = true;\n\n        // reinstate event listeners.\n        if (!this.isCheckboxFilter) {\n            this._list.addEventListener('click', this);\n        }\n\n        this._list.addEventListener('keyup', this);\n        this._list.addEventListener('keydown', this);\n    }\n\n    /**\n     * Move the focus to the next item in the list\n     * @param {number} direction, 1 for forward, -1 for backward\n     */\n    private focusNextItem(direction: number = 1): void {\n\n        let focusableItem: HTMLElement = document.activeElement as HTMLElement;\n\n        // Check if item belongs to this combobox\n        if (\n            focusableItem.classList.contains('combobox__item') &&\n            Utils.IsDescendant(focusableItem, this.host)) {\n\n            // Are we moving forward or backward\n            let method: string = direction === 1 ? 'nextElementSibling' : 'previousElementSibling';\n\n            // Find next focusable element. Focusable elements are elements\n            // that are not hidden\n            while (focusableItem[method]) {\n                focusableItem = focusableItem[method];\n                if (!focusableItem.hidden) {\n                    // When we found an element, focus it\n                    focusableItem.focus();\n                    break;\n                }\n            }\n\n        } else {\n            const items: NodeList = this._list.querySelectorAll('.combobox__item');\n\n            for (let i: number = 0, j: number = items.length; i < j; i += 1) {\n                const item: HTMLElement = items[i] as HTMLElement;\n\n                if (!item.hasAttribute('hidden')) {\n                    item.focus();\n                    break;\n                }\n            }\n        }\n    }\n\n    /**\n     * Called when anything which alters the displayed data has changed\n     * (data / labelField)\n     */\n    private initialize(): void {\n        clearTimeout(this._initTimeoutId);\n\n        this._initTimeoutId = window.setTimeout(\n            () => {\n                this.removeListItems();\n                this.createListItems();\n                this.createNoResultItem();\n\n                if (this.mode === MODE_AUTOCOMPLETE) {\n                    this.filterInput();\n                }\n\n            },\n            this._initTimeout);\n\n    }\n\n    /**\n     * Applies validation to the input. Called when the value of the input has changed\n     */\n    private onInputinput(): void {\n        if (this.data && !this.allowUnknown && this.data.indexOf(this._input.value) === -1) {\n            this._input.setCustomValidity(this.validationError);\n        } else {\n            this._input.setCustomValidity('');\n        }\n    }\n\n    /**\n     * Called when the user uses keyboard nav on the input,\n     * prevents body scrolling and event propagation.\n     * @param {KeyboardEvent} event\n     */\n    private onInputkeydown(event: KeyboardEvent): void {\n        event.stopPropagation();\n    }\n\n    /**\n     * Keyboard handler for the input\n     * Escape: Close the dropdown\n     * ArrowDown / ArrowUp: Move the focus to the list\n     * @param {KeyboardEvent} event\n     */\n    private onInputkeyup(event: KeyboardEvent): void {\n        if (Utils.IsKeyPressed(event, 'Escape')) {\n            return this.close();\n        } else if (Utils.IsKeyPressed(event, 'ArrowDown') || Utils.IsKeyPressed(event, 'ArrowUp')) {\n            if (!this.isOpen) {\n                this.open();\n                const list: HTMLElement = this._list.querySelector('.combobox__item') as HTMLElement;\n                if (list) {\n                    list.focus();\n                }\n            } else {\n                this.focusNextItem(Utils.IsKeyPressed(event, 'ArrowDown') ? 1 : -1);\n            }\n        }\n\n        if (this.mode === MODE_FILTER) {\n            this._value = null;\n            this.filterInput();\n        }\n    }\n\n    /**\n     * Called when the user clicks an item from the list\n     * @param {Event} event\n     */\n    private onListclick(event: Event): void {\n        this.setValue(this.findDataField(event.target as HTMLElement));\n    }\n\n    private onBodyclick(event: Event): void {\n\n        if (event.target !== this._input &&\n            event.target !== this._toggle &&\n            event.target !== this._icon &&\n            event.target !== this._list) {\n\n            // don't close the flyout if we are checking off an checkbox item.\n            if (this.isCheckboxFilter && this.findDataField(event.target as HTMLElement) != null) {\n                return;\n            }\n\n            this.close();\n        }\n    }\n\n    /**\n     * When the user clicks on the text instead of the list item, we need to find\n     * the element with the datafield.\n     * We traverse the parents until an element with [DATAFIELD] is found, or no parent is found (should not happen)\n     *\n     * @param {HTMLElement} el\n     * @returns {any}\n     */\n    private findDataField(el: HTMLElement): any {\n        while (el && !el[DATAFIELD]) {\n            el = el.parentElement;\n        }\n        return el && el[DATAFIELD];\n    }\n\n    /**\n     * Called when the user uses keyboard nav inside the list,\n     * prevents body scrolling and event propagation\n     * @param {KeyboardEvent} event\n     */\n    private onListkeydown(event: KeyboardEvent): void {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n\n    /**\n     * Keyboard handling for the select list,\n     * Escape: Close the dropdown\n     * ArrowDown: Focus to the next item in the list\n     * ArrowUp: Focus to the previous item in the list\n     * Enter: Select the currently focused item\n     * @param {KeyboardEvent} event\n     */\n    private onListkeyup(event: KeyboardEvent): void {\n        event.preventDefault();\n        if (Utils.IsKeyPressed(event, 'Escape')) {\n            this._value = null;\n            this.close();\n        } else if (Utils.IsKeyPressed(event, 'ArrowDown') || Utils.IsKeyPressed(event, 'ArrowUp')) {\n            this.focusNextItem(Utils.IsKeyPressed(event, 'ArrowDown') ? 1 : -1);\n        } else if (Utils.IsKeyPressed(event, 'Enter')) {\n            let focusedItem: HTMLElement = document.activeElement as HTMLElement;\n            if (focusedItem.classList.contains('combobox__item')) {\n                let val: any = this.findDataField(focusedItem);\n                this.setValue(val);\n            }\n        }\n    }\n\n    /**\n     * Called when the user clicks the dropdown button\n     * @param {Event} event\n     */\n    private onToggleclick(event: Event): void {\n\n        if (this.isOpen) {\n            this._value = null;\n            this.close();\n        } else {\n            this.open();\n        }\n\n    }\n\n    /**\n     * Updates the filter list with passed items.\n     *      * Adds event listener to the filter to uncheck the\n     *      * corresponding checkbox and rebuild the filterlist.\n     * @param collection The filters we are adding\n     */\n    private updateFilterList(collection: Array<any>): void {\n        let container: HTMLElement = this.getFilterContainer();\n        container.innerHTML = '';\n        let index: number;\n\n        for (let i: number = 0; i < collection.length; i++) {\n            index = i;\n            let filterNode: HTMLElement = Utils.CreateNode('<li tabindex=\"0\">' + collection[i] + '</li>');\n            filterNode.id = i.toString();\n\n            filterNode.addEventListener('click', (event: MouseEvent) => this.onFilterLabelClick(event.target));\n\n            filterNode.addEventListener('keyup', (event: KeyboardEvent) => {\n                if (Utils.IsKeyPressed(event, 'Enter')) {\n                    this.onFilterLabelClick(event.target);\n                }\n            });\n            container.appendChild(filterNode);\n        }\n    }\n\n    private onFilterLabelClick(element: EventTarget): void {\n        // uncheck the corresponding checkbox if we are using\n        // a checkbox filter\n        if (this.isCheckboxFilter) {\n\n            let filterNode: HTMLElement = element as HTMLElement;\n\n            let controllingCheckbox: HTMLInputElement =\n                this._list.querySelectorAll('.input__control:checked')[filterNode.id] as HTMLInputElement;\n\n            controllingCheckbox.checked = false;\n\n            let container: HTMLElement = this.getFilterContainer();\n\n            // rebuild the list\n            this.buildFilterList();\n\n            // check focus\n            if (container.querySelectorAll('li').length === 0) {\n                // focus list\n                this._input.focus();\n            } else {\n                // focus previous element\n                let previousSibling: number = parseInt(filterNode.id) > 0 ? parseInt(filterNode.id) - 1 : 0;\n                let focusableItem: HTMLElement = container.querySelectorAll('li')[previousSibling] as HTMLElement;\n                focusableItem.focus();\n            }\n        }\n\n    }\n\n    /**\n     * Adds a list--filter to the combobox for showing the\n     * currently checked checkboxes.\n     * If the element does not exist within the host, a new\n     * element will be inserted.\n     */\n    private getFilterContainer(): HTMLElement {\n\n        // if no element is referenced\n        if (this._filterContainer === null) {\n\n            // does a list--filter already exist on the host?\n            this._filterContainer = this.host.querySelector('.list--filter') as HTMLElement;\n            if (this._filterContainer === null) {\n                // create a new list--filter and add it before the input\n                this._filterContainer = Utils.CreateNode(`<ul class=\"list list--filter list--filter-inline list--filter-closable\" />`);\n                this.host.insertBefore(this._filterContainer, this.host.querySelector('.combobox__input'));\n            }\n        }\n\n        return this._filterContainer;\n    }\n\n    /**\n     * Prepares the filterlist by passing all checked boxes to the updateFilterList\n     */\n    private buildFilterList(): void {\n        this._value = [];\n        let checkedItems: NodeListOf<Element> = this._list.querySelectorAll('.input__control:checked');\n        for (let i: number = 0; i < checkedItems.length; i++) {\n            this._value.push(checkedItems[i].parentElement.querySelector('.input__label').textContent);\n        }\n        this.updateFilterList(this._value);\n    }\n\n    /**\n     * Set the value of the input based on a list item\n     * Dispatches an 'combobox-select' event\n     * @param {string} value\n     */\n    private setValue(value: any): void {\n        let event: any = document.createEvent('CustomEvent');\n        event.initEvent('combobox-select', true, true);\n        event.data = value;\n\n        if (!this.isCheckboxFilter && this.host.dispatchEvent(event)) {\n            this.value = value;\n            this.close();\n        }\n    }\n\n    /**\n     * Scaffolding, add correct classes & elements\n     */\n    private setup(): void {\n        if (!this.host.querySelector('.combobox__input')) {\n            throw new Error('Host element should contain a text input');\n        }\n\n        if (!this.host.classList.contains('combobox')) {\n            this.host.classList.add('combobox');\n        }\n\n        // Check if the icon is present\n        if (!this.host.querySelector('.combobox__icon')) {\n            this._icon = Utils.CreateNode(`<i class=\"combobox__icon icon icon-magnifier\" role=\"presentation\"></i>`) as HTMLElement;\n            this.host.appendChild(this._icon);\n        }\n\n        // Check if the button is present\n        this._toggle = this.host.querySelector('.combobox__toggle');\n\n        if (!this._toggle) {\n            // No button, create it\n            this._toggle = Utils.CreateNode(`<button type=\"button\" class=\"combobox__toggle\"></button>`);\n            this.host.appendChild(this._toggle);\n        }\n\n        // Check if the autocomplete list is present\n        if (!this.host.querySelector('.combobox__autocomplete')) {\n            let list: Element = Utils.CreateNode(\n                `<div class=\"combobox__autocomplete\">\n                     <div class=\"combobox__list-wrapper\">\n                         <ul class=\"combobox__list\" tabindex=\"0\" hidden>\n                         </ul>\n                     </div>\n                 </div>`);\n\n            this.host.appendChild(list);\n\n        }\n\n        // Store a reference to the <ul>\n        this._list = this.host.querySelector('.combobox__list') as HTMLElement;\n\n        // When we allow multiple, we create compact checkboxes from the element children\n        if (this.isCheckboxFilter) {\n\n            // add the modifier\n            this._list.classList.add('combobox__list--multiple');\n\n            this._list.setAttribute('tabindex', '-1');\n\n            // get reference to the current input\n            let checkboxValues: HTMLInputElement = this.host.querySelector('.combobox__input') as HTMLInputElement;\n\n            // use the _data for storing the items\n            this._data = [];\n            for (let i: number = 0; i < checkboxValues.children.length; i++) {\n                this._data.push({ name: checkboxValues.children[i].textContent, value: '' });\n            }\n\n            // swap the current element with an original input and copy the classes\n            let inputElement: Element = Utils.CreateNode('<input />');\n            inputElement.className = checkboxValues.className;\n            this.host.replaceChild(inputElement, checkboxValues);\n\n            // create the items in the list\n            this.createListItems();\n\n            // create no result item in the  list\n            this.createNoResultItem();\n        }\n\n        // Store a reference to the <input>\n        this._input = this.host.querySelector('.combobox__input') as HTMLInputElement;\n    }\n\n    private setupListeners(): void {\n\n        // Add a click listener to the button\n        this._toggle.addEventListener('click', this);\n\n        this._input.addEventListener('keyup', this);\n        this._input.addEventListener('keydown', this);\n        this._input.addEventListener('input', this);\n\n        if (!this.isCheckboxFilter) {\n            this._list.addEventListener('click', this);\n        }\n\n        this._list.addEventListener('keyup', this);\n        this._list.addEventListener('keydown', this);\n\n        document.body.addEventListener('click', this);\n    }\n\n    /**\n     * Removes all the listitems from the suggest list\n     */\n    private removeListItems(): void {\n        // list.remove\n        while (this._list.lastChild) {\n            this._list.removeChild(this._list.lastChild);\n        }\n    }\n}\n"]}