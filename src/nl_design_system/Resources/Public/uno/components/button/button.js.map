{"version":3,"file":"button.js","sourceRoot":"","sources":["../../../../../../../src/components/button/button.ts"],"names":["Button","Button.constructor","Button.destroy","Button.onKeyDown"],"mappings":"AAAA;;;;;;;;;GASG;AACH,sBAAoB,kBAAkB,CAAC,CAAA;AAEvC;IAIIA,gBAAoBA,OAAoBA;QAApBC,YAAOA,GAAPA,OAAOA,CAAaA;QACpCA,IAAIA,CAACA,eAAeA,GAAGA,IAAIA,CAACA,SAASA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;QACjDA,OAAOA,CAACA,gBAAgBA,CAACA,SAASA,EAAEA,IAAIA,CAACA,eAAeA,CAACA,CAACA;QAC1DA,OAAOA,CAACA,YAAYA,CAACA,MAAMA,EAAEA,QAAQA,CAACA,CAACA;QAEvCA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,SAASA,CAACA,QAAQA,CAACA,eAAeA,CAACA,CAACA,CAACA,CAACA;YACpDA,OAAOA,CAACA,YAAYA,CAACA,UAAUA,EAAEA,GAAGA,CAACA,CAACA;QAC1CA,CAACA;IACLA,CAACA;IAEDD;;OAEGA;IACHA,wBAAOA,GAAPA;QACIE,IAAIA,CAACA,OAAOA,CAACA,mBAAmBA,CAACA,SAASA,EAAEA,IAAIA,CAACA,eAAeA,CAACA,CAACA;IACtEA,CAACA;IAEOF,0BAASA,GAAjBA,UAAkBA,KAAoBA;QAClCG,EAAEA,CAACA,CAACA,aAAKA,CAACA,YAAYA,CAACA,KAAKA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA;YACjCA,KAAKA,CAACA,cAAcA,EAAEA,CAACA;YAEvBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,SAASA,CAACA,QAAQA,CAACA,eAAeA,CAACA,CAACA,CAACA,CAACA;gBACnDA,MAAMA,CAACA;YACXA,CAACA;YAEDA,EAAEA,CAACA,CAACA,OAAOA,IAAIA,CAACA,OAAOA,CAACA,KAAKA,KAAKA,UAAUA,CAACA,CAACA,CAACA;gBAC3CA,IAAIA,CAACA,OAAOA,CAACA,KAAKA,EAAEA,CAACA;YACzBA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACJA,qDAAqDA;gBACrDA,IAAIA,UAAUA,GAAeA,IAAIA,UAAUA,CAACA,OAAOA,EAAEA;oBACjDA,OAAOA,EAAEA,IAAIA;oBACbA,UAAUA,EAAEA,KAAKA;oBACjBA,IAAIA,EAAEA,MAAMA;iBACfA,CAACA,CAACA;gBAEHA,IAAIA,CAACA,OAAOA,CAACA,aAAaA,CAACA,UAAUA,CAACA,CAACA;YAE3CA,CAACA;QAELA,CAACA;IACLA,CAACA;IACLH,aAACA;AAADA,CAACA,AA7CD,IA6CC;AA7CY,cAAM,SA6ClB,CAAA","sourcesContent":["/**\n * Adds a11y attributes to a link which is styled as a button. Normally, links\n * are triggered with the [ENTER] key, while buttons as triggered with the\n * [SPACE] key. This scripts makes sure that links can also be triggered using\n * the [SPACE] key. Since there are no visual clues that the element is actually\n * an a element, rather than a button element, we have to mimic the behaviour of\n * the button element.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_button_role\n */\nimport {Utils} from '../../core/utils';\n\nexport class Button {\n\n    private keyDownListener: EventListenerObject;\n\n    constructor(private element: HTMLElement) {\n        this.keyDownListener = this.onKeyDown.bind(this);\n        element.addEventListener('keydown', this.keyDownListener);\n        element.setAttribute('role', 'button');\n\n        if (!this.element.classList.contains('btn--disabled')) {\n            element.setAttribute('tabindex', '0');\n        }\n    }\n\n    /**\n     * Removes all references to allow GC\n     */\n    destroy(): void {\n        this.element.removeEventListener('keydown', this.keyDownListener);\n    }\n\n    private onKeyDown(event: KeyboardEvent): void {\n        if (Utils.IsKeyPressed(event, ' ')) {\n            event.preventDefault();\n\n            if (this.element.classList.contains('btn--disabled')) {\n                return;\n            }\n\n            if (typeof this.element.click === 'function') {\n                this.element.click();\n            } else {\n                // Fallback for browsers which don't support click();\n                let clickEvent: MouseEvent = new MouseEvent('click', {\n                    bubbles: true,\n                    cancelable: false,\n                    view: window\n                });\n\n                this.element.dispatchEvent(clickEvent);\n\n            }\n\n        }\n    }\n}\n"]}